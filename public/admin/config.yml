backend:
  name: github
  repo: michael-collins/learning-materials-decapcms
  branch: main

# Uncomment below for local testing
# local_backend: true

media_folder: "public/uploads" # Media files will be stored in the repo under public/uploads
public_folder: "/uploads" # The src attribute for uploaded media will begin with /uploads

collections:
  - name: "articles" # Used in routes, e.g., /admin/collections/articles
    label: "Articles" # Used in the UI
    folder: "content/articles" # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    slug: "{{slug}}" # Filename template, e.g., YYYY-MM-DD-title.md
    fields: # The fields for each document, usually in front matter
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Author", name: "author", widget: "string"}
      - {label: "Date", name: "date", widget: "datetime"}
      - {label: "License", name: "license", widget: "select", required: false, options: ["CC BY 4.0", "CC BY-SA 4.0", "CC BY-NC 4.0", "CC BY-NC-SA 4.0", "CC BY-ND 4.0", "CC BY-NC-ND 4.0", "CC0 1.0", "All Rights Reserved"]}
      - {label: "Allow Embedding", name: "allowEmbed", widget: "boolean", default: false, required: false}
      - {label: "Body", name: "body", widget: "markdown"}
      - label: "Attachments"
        name: "attachments"
        widget: "list"
        required: false
        hint: "Add downloadable files or external links"
        fields:
          - {label: "Title", name: "title", widget: "string"}
          - {label: "Description", name: "description", widget: "text", required: false}
          - {label: "File", name: "file", widget: "file", required: false, hint: "Upload a file for download"}
          - {label: "External URL", name: "url", widget: "string", required: false, hint: "Or provide an external link (e.g., Google Drive)"}

  - name: "tutorials" # Used in routes, e.g., /admin/collections/tutorials
    label: "Tutorials" # Used in the UI
    folder: "content/tutorials" # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    slug: "{{slug}}" # Filename template, e.g., YYYY-MM-DD-title.md
    fields: # The fields for each document, usually in front matter
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Author", name: "author", widget: "string"}
      - {label: "Date", name: "date", widget: "datetime"}
      - {label: "Difficulty", name: "difficulty", widget: "select", options: ["Beginner", "Intermediate", "Advanced"]}
      - {label: "License", name: "license", widget: "select", required: false, options: ["CC BY 4.0", "CC BY-SA 4.0", "CC BY-NC 4.0", "CC BY-NC-SA 4.0", "CC BY-ND 4.0", "CC BY-NC-ND 4.0", "CC0 1.0", "All Rights Reserved"]}
      - {label: "Allow Embedding", name: "allowEmbed", widget: "boolean", default: false, required: false}
      - {label: "Body", name: "body", widget: "markdown"}
      - label: "Attachments"
        name: "attachments"
        widget: "list"
        required: false
        hint: "Add downloadable files or external links"
        fields:
          - {label: "Title", name: "title", widget: "string"}
          - {label: "Description", name: "description", widget: "text", required: false}
          - {label: "File", name: "file", widget: "file", required: false, hint: "Upload a file for download"}
          - {label: "External URL", name: "url", widget: "string", required: false, hint: "Or provide an external link (e.g., Google Drive)"}

  - name: "exercises"
    label: "Exercises"
    folder: "content/exercises"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Record ID", name: "recordId", widget: "string", required: false, hint: "Original Airtable record ID (for reference)"}
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly version of title"}
      - {label: "Type", name: "type", widget: "string", default: "oer:Practice", hint: "OER Schema type"}
      - {label: "Difficulty", name: "difficulty", widget: "select", options: ["Beginner", "Intermediate", "Advanced"]}
      - {label: "YouTube Playlist ID", name: "youtubePlaylistID", widget: "string", required: false, hint: "YouTube playlist ID for tutorial videos"}
      - {label: "Featured Image", name: "image", widget: "image", required: false}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", required: false}
      - {label: "License", name: "license", widget: "select", required: false, options: ["CC BY 4.0", "CC BY-SA 4.0", "CC BY-NC 4.0", "CC BY-NC-SA 4.0", "CC BY-ND 4.0", "CC BY-NC-ND 4.0", "CC0 1.0", "All Rights Reserved"]}
      - {label: "AI Usage Licenses", name: "aiLicense", widget: "select", required: false, multiple: true, default: ["AIUL-WA", "AIUL-NA-3D"], options: ["AIUL-NA", "AIUL-NA-WR", "AIUL-NA-IM", "AIUL-NA-VD", "AIUL-NA-AU", "AIUL-NA-3D", "AIUL-NA-TR", "AIUL-NA-MX", "AIUL-NA-CO", "AIUL-WA", "AIUL-WA-WR", "AIUL-WA-IM", "AIUL-WA-VD", "AIUL-WA-AU", "AIUL-WA-3D", "AIUL-WA-TR", "AIUL-WA-MX", "AIUL-WA-CO", "AIUL-CD", "AIUL-CD-WR", "AIUL-CD-IM", "AIUL-CD-VD", "AIUL-CD-AU", "AIUL-CD-3D", "AIUL-CD-TR", "AIUL-CD-MX", "AIUL-CD-CO", "AIUL-TC", "AIUL-TC-WR", "AIUL-TC-IM", "AIUL-TC-VD", "AIUL-TC-AU", "AIUL-TC-3D", "AIUL-TC-TR", "AIUL-TC-MX", "AIUL-TC-CO", "AIUL-DP", "AIUL-DP-WR", "AIUL-DP-IM", "AIUL-DP-VD", "AIUL-DP-AU", "AIUL-DP-3D", "AIUL-DP-TR", "AIUL-DP-MX", "AIUL-DP-CO", "AIUL-IU", "AIUL-IU-WR", "AIUL-IU-IM", "AIUL-IU-VD", "AIUL-IU-AU", "AIUL-IU-3D", "AIUL-IU-TR", "AIUL-IU-MX", "AIUL-IU-CO"], hint: "Select one or more AI usage policies. Defaults: AIUL-WA (general approval required) + AIUL-NA-3D (no AI for 3D work)"}
      - {label: "Rubric", name: "rubric", widget: "relation", collection: "rubrics", value_field: "slug", search_fields: ["name", "slug"], display_fields: ["name"], default: "exercise", hint: "Select assessment rubric"}
      - {label: "Tags", name: "tags", widget: "list", required: false, hint: "Content tags (e.g., Blender, AfterEffects)"}
      - {label: "Author", name: "author", widget: "string"}
      - {label: "Author URL", name: "authorUrl", widget: "string", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}
      - {label: "Allow Embedding", name: "allowEmbed", widget: "boolean", default: true, hint: "Enable iframe embedding for this content"}
      - {label: "Body", name: "body", widget: "markdown"}
      - label: "Attachments"
        name: "attachments"
        widget: "list"
        required: false
        hint: "Add downloadable files or external links"
        fields:
          - {label: "Title", name: "title", widget: "string"}
          - {label: "Description", name: "description", widget: "text", required: false}
          - {label: "File", name: "file", widget: "file", required: false, hint: "Upload a file for download"}
          - {label: "External URL", name: "url", widget: "string", required: false, hint: "Or provide an external link (e.g., Google Drive)"}

  - name: "projects"
    label: "Projects"
    folder: "content/projects"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Record ID", name: "recordId", widget: "string", required: false, hint: "Original Airtable record ID (for reference)"}
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly version of title"}
      - {label: "Type", name: "type", widget: "string", default: "oer:Assessment", hint: "OER Schema type"}
      - {label: "Difficulty", name: "difficulty", widget: "select", options: ["Beginner", "Intermediate", "Advanced"]}
      - {label: "YouTube Playlist ID", name: "youtubePlaylistID", widget: "string", required: false, hint: "YouTube playlist ID for tutorial videos"}
      - {label: "Featured Image", name: "image", widget: "image", required: false}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", required: false}
      - {label: "License", name: "license", widget: "select", required: false, options: ["CC BY 4.0", "CC BY-SA 4.0", "CC BY-NC 4.0", "CC BY-NC-SA 4.0", "CC BY-ND 4.0", "CC BY-NC-ND 4.0", "CC0 1.0", "All Rights Reserved"]}
      - {label: "AI Usage Licenses", name: "aiLicense", widget: "select", required: false, multiple: true, default: ["AIUL-WA", "AIUL-CD", "AIUL-NA-3D"], options: ["AIUL-NA", "AIUL-NA-WR", "AIUL-NA-IM", "AIUL-NA-VD", "AIUL-NA-AU", "AIUL-NA-3D", "AIUL-NA-TR", "AIUL-NA-MX", "AIUL-NA-CO", "AIUL-WA", "AIUL-WA-WR", "AIUL-WA-IM", "AIUL-WA-VD", "AIUL-WA-AU", "AIUL-WA-3D", "AIUL-WA-TR", "AIUL-WA-MX", "AIUL-WA-CO", "AIUL-CD", "AIUL-CD-WR", "AIUL-CD-IM", "AIUL-CD-VD", "AIUL-CD-AU", "AIUL-CD-3D", "AIUL-CD-TR", "AIUL-CD-MX", "AIUL-CD-CO", "AIUL-TC", "AIUL-TC-WR", "AIUL-TC-IM", "AIUL-TC-VD", "AIUL-TC-AU", "AIUL-TC-3D", "AIUL-TC-TR", "AIUL-TC-MX", "AIUL-TC-CO", "AIUL-DP", "AIUL-DP-WR", "AIUL-DP-IM", "AIUL-DP-VD", "AIUL-DP-AU", "AIUL-DP-3D", "AIUL-DP-TR", "AIUL-DP-MX", "AIUL-DP-CO", "AIUL-IU", "AIUL-IU-WR", "AIUL-IU-IM", "AIUL-IU-VD", "AIUL-IU-AU", "AIUL-IU-3D", "AIUL-IU-TR", "AIUL-IU-MX", "AIUL-IU-CO"], hint: "Select one or more AI usage policies. Defaults: AIUL-WA (approval required) + AIUL-CD (conceptual ok) + AIUL-NA-3D (no AI for 3D)"}
      - {label: "Rubric", name: "rubric", widget: "relation", collection: "rubrics", value_field: "slug", search_fields: ["name", "slug"], display_fields: ["name"], default: "project", hint: "Select assessment rubric"}
      - {label: "Tags", name: "tags", widget: "list", required: false, hint: "Content tags"}
      - {label: "Author", name: "author", widget: "string"}
      - {label: "Author URL", name: "authorUrl", widget: "string", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}
      - {label: "Allow Embedding", name: "allowEmbed", widget: "boolean", default: true, hint: "Enable iframe embedding for this content"}
      - {label: "Body", name: "body", widget: "markdown"}
      - label: "Attachments"
        name: "attachments"
        widget: "list"
        required: false
        hint: "Add downloadable files or external links"
        fields:
          - {label: "Title", name: "title", widget: "string"}
          - {label: "Description", name: "description", widget: "text", required: false}
          - {label: "File", name: "file", widget: "file", required: false, hint: "Upload a file for download"}
          - {label: "External URL", name: "url", widget: "string", required: false, hint: "Or provide an external link (e.g., Google Drive)"}

  - name: "specializations"
    label: "Specializations"
    folder: "content/specializations"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string"}
      - {label: "Type", name: "type", widget: "string", default: "oer:LearningComponent"}
      - {label: "Who It's For", name: "whoItsFor", widget: "text", required: false}
      - {label: "Target Role", name: "targetRole", widget: "string", required: false}
      - {label: "Featured Image", name: "image", widget: "image", required: false}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}
      - label: "OER Schema Metadata"
        name: "oer"
        widget: "object"
        required: false
        fields:
          - {label: "Context", name: "@context", widget: "string", default: "https://oerschema.org/"}
          - {label: "Type", name: "@type", widget: "string", default: "LearningComponent"}
          - {label: "Name", name: "name", widget: "string"}
          - {label: "Component Type", name: "componentType", widget: "string", default: "Unit"}
          - {label: "Learning Objectives", name: "teaches", widget: "list", required: false}
          - {label: "Has Parts", name: "hasPart", widget: "list", required: false}
          - {label: "Duration", name: "duration", widget: "string", hint: "ISO 8601 duration (e.g., PT8W)"}
          - {label: "Educational Level", name: "educationalLevel", widget: "string"}
          - {label: "Language", name: "inLanguage", widget: "string", default: "en-US"}
          - {label: "License URL", name: "license", widget: "string"}
      - {label: "Body", name: "body", widget: "markdown"}

  - name: "pathways"
    label: "Pathways"
    folder: "content/pathways"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string"}
      - {label: "Type", name: "type", widget: "string", default: "oer:Course"}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Featured Image", name: "image", widget: "image", required: false}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}
      - label: "OER Schema Metadata"
        name: "oer"
        widget: "object"
        required: false
        fields:
          - {label: "Context", name: "@context", widget: "string", default: "https://oerschema.org/"}
          - {label: "Type", name: "@type", widget: "string", default: "Course"}
          - {label: "Course Code", name: "courseCode", widget: "string"}
          - {label: "Name", name: "name", widget: "string"}
          - {label: "Description", name: "description", widget: "text"}
          - {label: "Learning Objectives", name: "teaches", widget: "list", required: false}
          - {label: "Course Parts", name: "hasPart", widget: "list", required: false}
          - {label: "Duration", name: "duration", widget: "string", hint: "ISO 8601 duration"}
          - {label: "Language", name: "inLanguage", widget: "string", default: "en-US"}
          - {label: "Free Access", name: "isAccessibleForFree", widget: "boolean", default: true}
          - {label: "License URL", name: "license", widget: "string"}
      - {label: "Body", name: "body", widget: "markdown"}

  - name: "lectures"
    label: "Lectures"
    folder: "content/lectures"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string"}
      - {label: "Type", name: "type", widget: "string", default: "oer:SupportingMaterial"}
      - {label: "Google Slides ID", name: "googleSlidesID", widget: "string", required: false, hint: "Long ID from Google Slides embed URL"}
      - {label: "Featured Image", name: "image", widget: "image", required: false}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", required: false}
      - {label: "Topics", name: "topics", widget: "text", required: false, hint: "Markdown-formatted topic list"}
      - {label: "Author", name: "author", widget: "string", required: false}
      - {label: "Published", name: "published", widget: "boolean", default: true}
      - label: "OER Schema Metadata"
        name: "oer"
        widget: "object"
        required: false
        fields:
          - {label: "Context", name: "@context", widget: "string", default: "https://oerschema.org/"}
          - {label: "Type", name: "@type", widget: "string", default: "SupportingMaterial"}
          - {label: "Name", name: "name", widget: "string"}
          - {label: "Material Type", name: "materialType", widget: "string", default: "Slide Deck"}
          - {label: "About", name: "about", widget: "list", required: false, hint: "Topics covered"}
          - {label: "Encoding Format", name: "encodingFormat", widget: "string", default: "application/vnd.google-apps.presentation"}
          - {label: "Duration", name: "duration", widget: "string", hint: "ISO 8601 duration (e.g., PT45M)"}
          - {label: "Language", name: "inLanguage", widget: "string", default: "en-US"}
          - {label: "License URL", name: "license", widget: "string"}
      - {label: "Body", name: "body", widget: "markdown"}

  - name: "docs"
    label: "Documentation Pages"
    folder: "content/docs"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Description", name: "description", widget: "text", required: false}
      - {label: "Slug", name: "slug", widget: "string"}
      - {label: "Document Type", name: "document", widget: "string", default: "page"}
      - {label: "Body", name: "body", widget: "markdown"}

  - name: "rubrics"
    label: "Assessment Rubrics"
    folder: "content/rubrics"
    create: true
    slug: "{{slug}}"
    identifier_field: "slug"
    fields:
      - {label: "Record ID", name: "recordId", widget: "string", required: false, hint: "Original Airtable record ID (for reference)"}
      - {label: "Name", name: "name", widget: "string"}
      - {label: "Slug", name: "slug", widget: "string", hint: "Used to reference this rubric in content"}
      - {label: "Description", name: "description", widget: "text"}
      - label: "Grading Criteria"
        name: "criteria"
        widget: "list"
        fields:
          - {label: "Criterion ID", name: "id", widget: "string", required: false, hint: "Original Airtable ID"}
          - {label: "Name", name: "name", widget: "string"}
          - {label: "Description", name: "description", widget: "text"}

# Editor Components - Custom insertable components for the markdown editor
# These appear as buttons in the editor toolbar (+ menu)
editor:
  preview: true

# Register custom editor components
# These will appear in the "+" menu when editing markdown fields
editor_components:
  - label: "YouTube Video"
    id: "youtube-video"
    pattern: /::youtube-video\{id="([^"]+)"(?:\s+title="([^"]*)")?\}/
    fields:
      - {label: "YouTube URL or Video ID", name: "id", widget: "string", hint: "Paste YouTube URL (e.g., https://youtube.com/watch?v=dQw4w9WgXcQ) or just the ID"}
      - {label: "Title", name: "title", widget: "string", default: "Video Tutorial", required: false}
    toBlock: "::youtube-video{id=\"{{id}}\" title=\"{{title}}\"}"
    toPreview: "<div style=\"border: 2px solid #ff0000; padding: 16px; margin: 16px 0; border-radius: 8px;\"><div style=\"font-weight: bold; color: #ff0000; margin-bottom: 8px;\">ðŸŽ¥ YouTube Video</div><div style=\"background: #000; aspect-ratio: 16/9; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #fff;\"><iframe src=\"https://www.youtube.com/embed/{{id}}\" style=\"width: 100%; height: 100%; border: none;\" allowfullscreen></iframe></div><div style=\"font-size: 12px; color: #666; margin-top: 8px;\">{{title}}</div></div>"

  - label: "Video Embed"
    id: "iframe-component"
    pattern: /::iframe-component\{src="([^"]+)"(?:\s+title="([^"]*)")?\}/
    fields:
      - {label: "Video URL", name: "src", widget: "string", hint: "Full YouTube or Vimeo URL"}
      - {label: "Title", name: "title", widget: "string", default: "Video Tutorial"}
    toBlock: "::iframe-component{src=\"{{src}}\" title=\"{{title}}\"}"
    toPreview: "<div style=\"border: 2px solid #4a90e2; padding: 16px; margin: 16px 0; border-radius: 8px;\"><div style=\"font-weight: bold; color: #4a90e2;\">ðŸ“¹ Video Embed: {{title}}</div><div style=\"font-size: 12px; color: #666; margin-top: 4px;\">{{src}}</div></div>"

  - label: "ðŸ“Š Google Slides Presentation"
    id: "google-slides-component"
    pattern: /^::google-slides-component\{id="([^"]+)"(?:\s+title="([^"]*)")?(?:\s+height="([^"]*)"))?\}$/
    fields:
      - {label: "Slides ID", name: "id", widget: "string", hint: "The ID from the Google Slides URL (between /d/ and /edit)"}
      - {label: "Title", name: "title", widget: "string", default: "Presentation"}
      - {label: "Height", name: "height", widget: "string", default: "600", required: false}
    toBlock: |
      ::google-slides-component{id="{{id}}" title="{{title}}" height="{{height}}"}
    toPreview: |
      <div style="border: 2px solid #34a853; padding: 16px; margin: 16px 0; border-radius: 8px; background: #f0fff4;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span style="font-size: 24px;">ðŸ“Š</span>
          <strong style="color: #34a853;">Google Slides</strong>
        </div>
        <div style="color: #333; margin-top: 8px;"><strong>{{title}}</strong></div>
        <div style="color: #666; font-size: 12px; margin-top: 4px;">ID: {{id}}</div>
      </div>

  - label: "ðŸ“‹ Assessment Rubric"
    id: "rubric-component"
    pattern: /^::rubric-component\{id="([^"]+)"\}$/
    fields:
      - label: "Rubric"
        name: "id"
        widget: "relation"
        collection: "rubrics"
        search_fields: ["name", "slug"]
        value_field: "slug"
        display_fields: ["name"]
        hint: "Select which rubric to display"
    toBlock: |
      ::rubric-component{id="{{id}}"}
    toPreview: |
      <div style="border: 2px solid #f59e0b; padding: 16px; margin: 16px 0; border-radius: 8px; background: #fffbeb;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
          <span style="font-size: 24px;">ðŸ“‹</span>
          <strong style="color: #f59e0b;">Grading Rubric</strong>
        </div>
        <div style="color: #333; margin-top: 8px;">Rubric: <strong>{{id}}</strong></div>
      </div>

